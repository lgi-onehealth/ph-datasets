process {
    
    withName: 'PROCESS_METADATA' {
        publishDir = [
            path: { "${params.outdir}/metadata/" },
            mode: params.publish_mode,
            pattern: '*.{csv,yml}'
        ]
    }
    withName: 'FFQ' {
        publishDir = [
            path: { "${params.outdir}/fastq/${meta.id}/" },
            mode: params.publish_mode,
            pattern: '*.{fastq.gz,yml}'
        ]
        maxForks = params.max_downloads
    }

}